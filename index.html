<html>

<body>
    <div id="g"></div>
    <style>
        #g {
            display: fixed;
            inset: 0;
            display: grid;
            grid-template-columns: repeat(25, 1fr);
            color: #026;
            background: #026;
        }

        @keyframes b {
            from {
                color: #026;
            }

            to {
                color: #3b7;
            }
        }

        @keyframes l {
            from {
                color: #3b7;
            }

            to {
                color: #026;
            }
        }

        @keyframes c {
            0% {
                color: #3b7;
            }

            33% {
                color: #d80;
            }

            100% {
                color: #026;
            }
        }

        .a {
            color: #3b7;
        }

        .b {
            animation: b 500ms;
        }

        .l {
            animation: l 500ms;
        }

        .c {
            animation: c 500ms;
        }

        #g * {
            display: block;
            width: min(4dvw, 4dvh);
            aspect-ratio: 1;
            background-image: radial-gradient(circle at center, currentColor, transparent);
        }
    </style>
    <script>
        const width = 25
        const column = v => (v * width) || 1
        const d = document
        const t = setTimeout
        const g = d.getElementById('g')
        const clear = (e, r) => e.classList.remove(r)
        const set = (e, a, r) => {
            e.classList.add(a);
            if (r) {
                t(() => clear(e, r), 20)
            }
        }
        const elements = Array.from({ length: width })
            .map((z, y) => Array.from({ length: width })
                .map((z, x) => {
                    const e = d.createElement('i')
                    e.setAttribute('data-c', `${x}|${y}`)
                    g.appendChild(e)
                    if (Math.random() >= 0.5) {
                        set(e, 'a')
                    }
                    return e
                }))

        const is_alive = (e, a = 'a') => e.classList.contains(a)
        const neighbors = e => {
            let [x, y] = e.getAttribute('data-c').split('|');
            let coords = [];
            for (k = x - 1; k < x + 2; k++) {
                for (j = y - 1; j < y + 2; j++) {
                    if (k != x && j != y) {
                        const n = elements[k]?.[j]
                        if (n && is_alive(n)) {
                            coords.push(n)
                        }
                    }
                }
            }
            return coords.length
        }
        const step = () => {
            for (const row of elements) {
                for (const e of row) {
                    ['b', 'l', 'c'].map(l => clear(e, l));
                    let m = neighbors(e);
                    if (is_alive(e)) {
                        if (m < 2) {
                            set(e, 'l', 'a')
                        } else if (m > 3) {
                            set(e, 'c', 'a')
                        }
                    } else {
                        if (m === 3) {
                            set(e, 'b');
                            t(() => set(e, 'a', 'b'), 500)
                        }
                    }
                }
            }
            t(step, 600)
        }
        t(step, 600)
    </script>
</body>

</html>