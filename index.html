<p id=g><style>#g{display:grid;grid-template-columns:repeat(32,3vh);*{transition:color .5s;height:3vh;background:currentColor}.a{color:#3b7}}</style><script>wi=32;d=document;p=parseInt;t=setTimeout;cl=e=>e.classList;cr=(e)=>cl(e).remove('a');st=(e)=>cl(e).add('a');el=Array.from({length:wi}).map(v=>Array.from({length:wi}).map(v=>{let e=d.createElement('div');d.getElementById('g').appendChild(e);return e}));ia=e=>e&&cl(e).contains('a');ne=(y,x)=>{let n = 0;for(k=y-1;k<y+2;k++)for(j=x-1;j<x+2;j++)(k!=y||j!=x)&&(ia(el[k]?.[j]))&&n++;return n};navigator.mediaDevices.getUserMedia({audio:!0}).then(sm=>{au=new AudioContext;sr=au.createMediaStreamSource(sm);an=au.createAnalyser();an.fftSize=wi*2;da=new Uint8Array(wi);sr.connect(an);let dr=v=>{requestAnimationFrame(dr);an.getByteTimeDomainData(da);for(x in da)st(el[(p(da[x]/128.0*16))][x])};dr()});sp=v=>{for(y in el){for(x in el[y]){let e=el[y][x];let m=ne(p(y),p(x));t(v=>ia(e)?((m<2||m>3)&&cl(e)):(m==3&&st(e)),9)}}t(sp,600)};sp();</script>