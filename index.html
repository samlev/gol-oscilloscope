<p id="g"><style>#g{display:grid;grid-template-columns:repeat(32,1fr);background:#026}@keyframes b{0%{color:#026}to{color:#3b7}}@keyframes l{0%{color:#3b7}to{color:#026}}#g>*{position:relative;width:3vh;height:3vh;border:0;color:#026;background:#026;*{border-radius:50%;display:block;position:absolute;inset:0;background:radial-gradient(circle at center, currentColor, #0260 65%);}&.a{color: #3b7;}&.b{animation:b 1s;}&.l{animation:l 1s;}}</style><script>wi=32;d=document;ce=t=>d.createElement(t);ac=(e,c)=>e.appendChild(c);t=setTimeout;cl=e=>e.classList;cr=(e,r)=>cl(e).remove(r);st=(e,a,r)=>cl(e).add(a)||(r&&t(v=>cr(e,r),50));el=Array.from({length:wi}).map((v,y)=>Array.from({length:wi}).map((v,x)=>{let e=ce('button');e.onclick=v=>cl(e).toggle('a');ac(e,ce('i'));ac(d.getElementById('g'),e);return e}));ia=e=>e&&cl(e).contains('a');ne=(y,x)=>{let n = 0;for(k=y-1;k<y+2;k++)for(j=x-1;j<x+2;j++)(k!=y||j!=x)&&(ia(el[k]?.[j]))&&n++;return n};navigator.mediaDevices.getUserMedia({audio:true}).then(sm=>{let au=new AudioContext;let sr=au.createMediaStreamSource(sm);let an=au.createAnalyser();an.fftSize=wi*2;let da=new Uint8Array(an.frequencyBinCount);sr.connect(an);let dr=v=>{requestAnimationFrame(dr);an.getByteTimeDomainData(da);for (x in da)st(el[(Math.floor(da[x]/128.0*16))][x], 'a')};dr()});sp=v=>{for(let y in el){for(let x in el[y]){let e=el[y][x];['b','l','c'].map(l=>cr(e,l));let m=ne(parseInt(y),parseInt(x));let a=ia(e);a?((m<2||m>3)&&st(e,'l','a')):(m==3&&(st(e,'b')||t(v=>st(e,'a','b'),250)))}}t(sp,600)};sp();</script>