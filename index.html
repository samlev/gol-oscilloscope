<p id="g"><style>@keyframes l{0%{color:#3b7}to{color:#026}}#g{display:grid;grid-template-columns:repeat(32,3vh);background:#026;*{height:3vh;color:#026;border-radius:50%;background:currentColor}.a,.b{color:#3b7}.l{animation:l 1s}}</style><script>wi=32;d=document;t=setTimeout;cl=e=>e.classList;cr=(e,r)=>cl(e).remove(r);st=(e,a,r)=>cl(e).add(a)||(r&&t(v=>cr(e,r),50));el=Array.from({length:wi}).map(v=>Array.from({length:wi}).map(v=>{let e=d.createElement('button');d.getElementById('g').appendChild(e);return e}));ia=e=>e&&cl(e).contains('a');ne=(y,x)=>{let n = 0;for(k=y-1;k<y+2;k++)for(j=x-1;j<x+2;j++)(k!=y||j!=x)&&(ia(el[k]?.[j]))&&n++;return n};navigator.mediaDevices.getUserMedia({audio:true}).then(sm=>{au=new AudioContext;sr=au.createMediaStreamSource(sm);an=au.createAnalyser();an.fftSize=wi*2;let da=new Uint8Array(an.frequencyBinCount);sr.connect(an);let dr=v=>{requestAnimationFrame(dr);an.getByteTimeDomainData(da);for (x in da)st(el[(Math.floor(da[x]/128.0*16))][x], 'a')};dr()});sp=v=>{for(let y in el){for(let x in el[y]){let e=el[y][x];['b','l'].map(l=>cr(e,l));let m=ne(parseInt(y),parseInt(x));let a=ia(e);a?((m<2||m>3)&&st(e,'l','a')):(m==3&&(st(e,'b')||t(v=>st(e,'a','b'),250)))}}t(sp,600)};sp();</script>